<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Processing Order...</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; }
        .loader { border: 5px solid #f3f3f3; border-top: 5px solid #3498db; 
                 border-radius: 50%; width: 50px; height: 50px; 
                 animation: spin 2s linear infinite; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <h2>Processing your order...</h2>
    <div class="loader"></div>
    
    <script>
        // Extract data from URL
        const urlParams = new URLSearchParams(window.location.search);
        
        // Your SECRET Web3Forms key goes here
        const WEB3FORMS_KEY = "YOUR_NEW_SECRET_KEY_HERE"; // ⚠️ Get NEW key from Web3Forms
        
        // Build form data
        const formData = new FormData();
        formData.append('access_key', WEB3FORMS_KEY);
        formData.append('subject', 'New Order - HIK Store UAE');
        formData.append('from_name', urlParams.get('name') || 'Customer');
        formData.append('email', urlParams.get('email') || '');
        formData.append('phone', urlParams.get('phone') || '');
        formData.append('order_id', urlParams.get('order_id') || '');
        formData.append('total_amount', urlParams.get('total') || '');
        
        // Submit to Web3Forms
        fetch('https://api.web3forms.com/submit', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if(data.success) {
                window.location.href = 'success.html?order_id=' + (urlParams.get('order_id') || '');
            } else {
                window.location.href = 'error.html';
            }
        })
        .catch(error => {
            window.location.href = 'error.html';
        });
    </script>
</body>
</html>
